PRAGMA foreign_keys=on;

CREATE TABLE `OpcUaServers` (
	`Id`	TEXT NOT NULL UNIQUE,
	`Name`	TEXT NOT NULL,
	`Host`	TEXT NOT NULL,
	`UserName`	TEXT,
	`Password`	TEXT,
	PRIMARY KEY(`Id`)
);

CREATE TABLE `OpcUaGroups` (
	`Id`	TEXT NOT NULL UNIQUE,
	`Name`	TEXT NOT NULL,
	`OpcUaServerId`	TEXT NOT NULL,
	`ReqUpdateRate`	INTEGER,
	PRIMARY KEY(`Id`),
	FOREIGN KEY(`OpcUaServerId`) REFERENCES `OpcUaServers`(`id`) ON DELETE CASCADE
);

CREATE TABLE `OpcUaItems` (
	`Id`	TEXT NOT NULL UNIQUE,
	`Name`	TEXT NOT NULL,
	`OpcUaGroupId`	TEXT NOT NULL,
	`NodeId`	TEXT,
	`Value`	TEXT,
	`Timestamp`	TEXT,
	PRIMARY KEY(`Id`),
	FOREIGN KEY(`OpcUaGroupId`) REFERENCES `OpcUaGroups`(`id`) ON DELETE CASCADE
);

CREATE TABLE `OpcUaGroupWorks` (
	`Id`	TEXT NOT NULL UNIQUE,
	`OpcUaGroupId`	TEXT NOT NULL,
	`Name`	TEXT NOT NULL,
	`Type`	TEXT NOT NULL,
	`IsEnabled`	INTEGER NOT NULL,
	`LaunchGroup` TEXT NOT NULL,
	`JsonSettings` TEXT NOT NULL,
	FOREIGN KEY(`OpcUaGroupId`) REFERENCES `OpcUaGroups`(`id`) ON DELETE CASCADE,
	PRIMARY KEY(`Id`)
);