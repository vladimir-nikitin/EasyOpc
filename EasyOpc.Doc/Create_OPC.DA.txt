PRAGMA foreign_keys=on;

CREATE TABLE `OpcDaServers` (
	`Id`	TEXT NOT NULL UNIQUE,
	`Name`	TEXT NOT NULL,
	`Host`	TEXT NOT NULL,
	`Clsid`	TEXT,
	PRIMARY KEY(`Id`)
);

CREATE TABLE `OpcDaGroups` (
	`Id`	TEXT NOT NULL UNIQUE,
	`Name`	TEXT NOT NULL,
	`OpcDaServerId`	TEXT NOT NULL,
	`ReqUpdateRate`	INTEGER,
	PRIMARY KEY(`Id`),
	FOREIGN KEY(`OpcDaServerId`) REFERENCES `OpcDaServers`(`id`) ON DELETE CASCADE
);

CREATE TABLE `OpcDaItems` (
	`Id`	TEXT NOT NULL UNIQUE,
	`Name`	TEXT NOT NULL,
	`OpcDaGroupId`	TEXT NOT NULL,
	`CanonicalDataType`	TEXT,
	`AccessPath`	TEXT,
	`ReqDataType`	TEXT,
	`Value`	TEXT,
	`Quality`	TEXT,
	`Timestamp`	TEXT,
	PRIMARY KEY(`Id`),
	FOREIGN KEY(`OpcDaGroupId`) REFERENCES `OpcDaGroups`(`id`) ON DELETE CASCADE
);

CREATE TABLE `OpcDaGroupWorks` (
	`Id`	TEXT NOT NULL UNIQUE,
	`OpcDaGroupId`	TEXT NOT NULL,
	`Name`	TEXT NOT NULL,
	`Type`	TEXT NOT NULL,
	`IsEnabled`	INTEGER NOT NULL,
	`LaunchGroup` TEXT NOT NULL,
	`JsonSettings` TEXT NOT NULL,
	FOREIGN KEY(`OpcDaGroupId`) REFERENCES `OpcDaGroups`(`id`) ON DELETE CASCADE,
	PRIMARY KEY(`Id`)
);